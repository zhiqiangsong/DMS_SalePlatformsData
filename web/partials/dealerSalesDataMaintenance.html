<h2 class="text-center" style="padding-top:20px">经销商销售数据单</h2>
<div class="margin-top-5" style="padding:20px 0 10px 0">
        <div class="pull-right margin-right-300">
            <button type="button" class="btn btn-info" ng-click="saveAllData(dealerSalesData,dealerSalesDataEntryList)" >保存</button>
            <button type="button" class="btn btn-info" ng-click="commitAllData(dealerSalesData)" >提交</button>
            <button type="button" class="btn btn-danger" confirm-required="{{dealerSalesData.fid}}" ng-click="deleteDealerSalesData(dealerSalesData)" >删除</button>
            <button type="button" class="btn btn-primary" ng-click="return()" >返回</button>
        </div>
        <div class="margin-top-5 col-sm-6 col-sm-offset-2" >
         <form role="form" name="toNoForm" class="form-inline pull-right">
            <div class="form-group" >
                    <label class="control-label no-padding-right field-required" for="FBillNo"> 编号:</label>
                        <input type="hidden" ng-model="dealerSalesData.FID">
                        <input type='text' class='form-control'
                                        name='FBillNo'
                                        ng-model="dealerSalesData.FBillNo"
                                        class='full-width form-control'
                                        placeholder="填写编号"
                                        typeahead-editable="false"
                                        autocomplete="off">
            </div>
            <div class="form-group" >
                <label class="control-label no-padding-right field-required" for="single"> 制单人:</label>
                    <input type='text' class='form-control'
                                    name='single'
                                    ng-model="dealerSalesData.single"
                                    class='full-width form-control'
                                    typeahead-editable="false"
                                    autocomplete="off" disabled>
            </div>
            <div class="form-group" >
                <label class="control-label no-padding-right field-required" for="statusZN"> 状态:</label>
                    <input type='text' class='form-control'
                                    name='statusZN'
                                    ng-model="dealerSalesData.statusZN"
                                    class='full-width form-control'
                                    typeahead-editable="false"
                                    autocomplete="off" disabled>
            </div>
          <!-- <button type="submit" class="btn btn-default" ng-click="queryDealerSalesData()" >查询</button> -->
        </form>
        <form role="form" name="toNoForm" class="margin-top-20 form-inline pull-right">
            <div class="form-group" >
                <label class="control-label no-padding-right field-required" for="role"> 产品类别:</label>
                    <select class="chosen-select form-control"
                        ng-model="dealerSalesData.ProductTypeName"
                        name="ProductTypeName"
                        ng-options="item.FName as item.FName for item in productTypeList"
                        >
                        <option value="">选择产品类别</option>
                    </select>
            </div> 
          <div class="form-group">
            <label class="control-label no-padding-right field-required" for="role"> 制单日期:</label>      
            <input type="text" class="form-control" datepicker-popup="yyyy-MM-dd" placeholder="请选择日期" 
                  datepicker-options="{minMode: 'day'}" 
                  datepicker-mode="'day'"
                ng-model="dealerSalesData.FDate" is-open="opened" ng-readonly="true"
                ng-required="true" close-text="关闭"  ng-click="opened=true" clear-text="清除" current-text='本日'/>
          </div>
          <!-- <button type="submit" class="btn btn-default" ng-click="queryDealerSalesData()" >查询</button> -->
          <div class="form-group" >
            <label class="control-label no-padding-right field-required" for="note"> 备注:</label>
                <input type='text' class='form-control'
                                name='note'
                                ng-model="dealerSalesData.note"
                                class='full-width form-control'
                                typeahead-editable="false"
                                autocomplete="off">
            </div>
        </form>
      </div>
      </div>  
<div class="margin-top-20" style="padding:30px 0 10px 0">
    <table class="table padding-top table-striped border">
        <thead> 
            <tr>
            <th class="text-center">
                <a class="cursor-pointer" ng-click="sortType = 'agentNumber'; sortReverse = !sortReverse">
                二级经销商代码
                <span ng-show="sortType == 'agentNumber' && !sortReverse" class="fa fa-caret-down"></span>
                <span ng-show="sortType == 'agentNumber' && sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th class="text-center">
                <a class="cursor-pointer" ng-click="sortType = 'agentName'; sortReverse = !sortReverse">
                二级经销商名称
                <span ng-show="sortType == 'agentName' && !sortReverse" class="fa fa-caret-down"></span>
                <span ng-show="sortType == 'agentName' && sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            
            <th class="text-center">
                <a class="cursor-pointer" ng-click="sortType = 'FDateEnd'; sortReverse = !sortReverse">
                截止日期
                <span ng-show="sortType == 'FDateEnd' && !sortReverse" class="fa fa-caret-down"></span>
                <span ng-show="sortType == 'FDateEnd' && sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>

            <th class="text-center">
                <a class="cursor-pointer" ng-click="sortType = 'salesVolume'; sortReverse = !sortReverse">
                销量
                <span ng-show="sortType == 'salesVolume' && !sortReverse" class="fa fa-caret-down"></span>
                <span ng-show="sortType == 'salesVolume' && sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>

            <th class="text-center">
                <a class="cursor-pointer" ng-click="sortType = 'saleroom'; sortReverse = !sortReverse">
                销售额
                <span ng-show="sortType == 'saleroom' && !sortReverse" class="fa fa-caret-down"></span>
                <span ng-show="sortType == 'saleroom' && sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            
            <th class="text-center">
                <a class="cursor-pointer" ng-click="sortType = 'remark'; sortReverse = !sortReverse">
                备注
                <span ng-show="sortType == 'remark' && !sortReverse" class="fa fa-caret-down"></span>
                <span ng-show="sortType == 'remark' && sortReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            </tr>
        </thead> 
        <tbody>          
            <tr ng-if="dealerSalesDataEntryListByPage&&dealerSalesDataEntryListByPage.length>0" 
                ng-repeat="(idx,dealerSalesDataEntry) in dealerSalesDataEntryListByPage | orderBy:sortType:sortReverse">
            <td width="8%" class="text-center">{{dealerSalesDataEntry.agentNumber}}</td>

            <!-- <td width="8%" class="text-center">
                <input type="text" name="{{dealerSalesDataEntry.agentNumber}}" ng-model="dealerSalesDataEntry.agentNumber" value="{{dealerSalesDataEntry.agentNumber}}">
            </td> -->
            <td width="8%" class="text-center">{{dealerSalesDataEntry.agentName}}</td>
            <!-- <td width="8%" class="text-center">{{dealerSalesDataEntry.endDate|date:'yyyy-MM-dd'}}</td> -->
            <td width="8%" class="text-center">
                <input type="text" class="form-control" datepicker-popup="yyyy-MM-dd" placeholder="请选择日期" 
                  datepicker-options="{minMode: 'day'}" 
                  datepicker-mode="'day'"
                ng-model="dealerSalesDataEntry.FDateEnd" is-open="opened" ng-readonly="true"
                ng-required="true" close-text="关闭"  ng-click="opened=true" clear-text="清除" current-text='本日'/>
            </td>
            <td width="8%" class="text-center">
                <input type="number" name="{{dealerSalesDataEntry.salesVolume}}" ng-model="dealerSalesDataEntry.salesVolume" value="{{dealerSalesDataEntry.salesVolume}}">
            </td>
            <td width="8%" class="text-center">
                <input type="number" name="{{dealerSalesDataEntry.saleroom}}" ng-model="dealerSalesDataEntry.saleroom" value="{{dealerSalesDataEntry.saleroom}}">
            </td>
            <td width="8%" class="text-center">
                <input type="text" name="{{dealerSalesDataEntry.remark}}" ng-model="dealerSalesDataEntry.remark" value="{{dealerSalesDataEntry.remark}}">
                <!-- <input type="hidden" ng-model=""> -->
            </td>
        </tr>
        <tr ng-if="!dealerSalesDataEntryList||dealerSalesDataEntryList.length==0">
            <td colspan="4" class='empty-message'>没有数据.</td>
        </tr>
        </tbody> 
        <tfoot>
            <tr> 
                <td  class="text-center">合计:</td>
                <td  class="text-center"></td>
                <td  class="text-center"></td>
                <td  class="text-center">{{countSalesVolume}}</td>
                <td  class="text-center">{{countSaleroom}}</td>
                <td  class="text-center"></td>
            </tr>
        </tfoot>
    </table>
    <div class="margin-top text-center">
            <pagination boundary-links="true" max-size="maxSize" total-items="totalItems" ng-model="currentPage" items-per-page="itemPerPage" ng-change="pageChanged()" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
    </div>
</div>

<pre ng-show="debug">dealerSalesData:{{dealerSalesData | json}}</pre>		

    <pre ng-show="debug">dealerSalesDataEntryList:{{dealerSalesDataEntryList | json}}</pre>	
<!--     <pre ng-show="debug">dealerSalesDataEntryListByPage:{{dealerSalesDataEntryListByPage | json}}</pre>	 -->
